---
layout: layout.liquid
pagination:
  data: collections.postsByYear
  size: 1
  alias: yearGroup
permalink: "/blog/{{ yearGroup.year }}{% if pagination.pageNumber > 0 %}/page/{{ pagination.pageNumber + 1 }}{% endif %}/index.html"
eleventyComputed:
  posts: "{{ yearGroup.posts | slice(pagination.pageNumber * 10, (pagination.pageNumber + 1) * 10) }}"
---

<main class="container">
  <h1>Blog: {{ pagination.items[0].year }}</h1>
  <nav style="margin-bottom: 2em">
    <a href="/blog/">All</a>
    {% for y in collections.post | map(attribute='date') | map('getFullYear') |
    unique | sort(true) | reverse %}
    <a href="/blog/{{ y }}/">{{ y }}</a>
    {% endfor %}
  </nav>
  {% for post in pagination.items[0].posts | reverse %}
  <article class="blog-preview" style="margin-bottom: 2em">
    <h2>
      <a href="{{ post.url }}">{{ post.data.title }}</a>
    </h2>
    <small style="display: block; margin-bottom: 0.5em">
      {{ post.date | date("yyyy-MM-dd") }}
    </small>
    {% if post.data.image %}
    <a href="{{ post.url }}">
      <img
        src="{{ post.data.image }}"
        alt="{{ post.data.title }}"
        style="
          max-width: 200px;
          height: auto;
          display: block;
          margin: 0 auto 1em auto;
        "
      />
    </a>
    {% endif %}
    <p>
      {% if post.data.description %}
      {{ post.data.description }}
      {% else %}
      {{ post.templateContent | striptags | truncate(200, true, "â€¦") }}
      {% endif %}
    </p>
  </article>
  {% endfor %}
</main>
