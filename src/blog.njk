---
layout: layout.liquid
pagination:
  data: collections.post
  size: 10
  alias: posts
permalink: "/blog{% if pagination.pageNumber > 0 %}/page/{{ pagination.pageNumber }}{% endif %}/index.html"
---

{% if pagination.pageNumber == 0 %}
<link rel="canonical" href="/blog/" />
{% endif %}

<main class="container">
  <h1>Blog</h1>
  <nav style="margin-bottom: 2em">
    <strong>Filter:</strong>
    <a href="/blog/">All</a>
    {% set years = [] %} {% for post in collections.post %} {% set year =
    post.date.getFullYear() %} {% if year not in years %} {% set years =
    years.concat([year]) %} {% endif %} {% endfor %} {% set years = years |
    sort(true) | reverse %} {% for year in years %}
    <a href="/blog/{{ year }}/">{{ year }}</a>
    {% endfor %}
  </nav>

  {% for post in posts | reverse %}
  <article class="blog-preview" style="margin-bottom: 2em">
    <h2>
      <a href="{{ post.url }}">{{ post.data.title }}</a>
    </h2>
    <small style="display: block; margin-bottom: 0.5em">
      {{ post.date | date("yyyy-MM-dd") }}
    </small>
    {% if post.data.image %}
    <a href="{{ post.url }}">
      <img
        src="{{ post.data.image }}"
        alt="{{ post.data.title }}"
        style="
          max-width: auto;
          height: auto;
          display: block;
          margin: 0 auto 1em auto;
        "
      />
    </a>
    {% endif %}
    <p>
      {% if post.data.description %}
      {{ post.data.description }}
      {% else %}
      {{ post.templateContent | striptags | truncate(200, true, "â€¦") }}
      {% endif %}
    </p>
  </article>
  {% endfor %}
</main>
